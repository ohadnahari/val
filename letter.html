<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>××›×ª×‘ ×©×œ×™</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

<style>
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:system-ui, Segoe UI, Arial, sans-serif;
    background: radial-gradient(circle at top, #ffe6ef, #ff9fb2);
    overflow:hidden;
  }

  #hearts{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:0;
  }
  .heart{
    position:absolute;
    top:-40px;
    opacity:0;
    animation: fall linear forwards;
  }
  @keyframes fall{
    0%   { transform: translateY(0) rotate(0deg); opacity:0; }
    10%  { opacity:.8; }
    100% { transform: translateY(120vh) rotate(120deg); opacity:0; }
  }

  .paper{
    width:min(860px, 92vw);
    background:#fffdf7;
    padding:64px 56px;
    border-radius:32px;
    box-shadow: 0 30px 90px rgba(0,0,0,.22);
    position:relative;
    z-index:2;
    line-height:1.85;
    animation: enter .9s ease both;
  }
  @keyframes enter{
    from{opacity:0; transform: translateY(16px) scale(.99);}
    to{opacity:1; transform: translateY(0) scale(1);}
  }

  h1{
    font-family:'Playfair Display', serif;
    margin:0 0 18px;
    font-size:42px;
  }
  p{
    margin: 14px 0;
    font-size:20px;
    color:#222;
  }
  .signature{
    margin-top:34px;
    font-weight:700;
    font-size:20px;
  }
  .btnRow{
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    margin-top:28px;
  }
  a.btn{
    display:inline-block;
    padding:12px 18px;
    border-radius:999px;
    background:#ff4d6d;
    color:#fff;
    text-decoration:none;
    font-weight:700;
    box-shadow:0 14px 30px rgba(255,77,109,.35);
  }
  a.btn.secondary{
    background:#111;
    box-shadow:0 14px 30px rgba(0,0,0,.2);
  }

  /* Music indicator */
  .musicBadge{
    position:fixed;
    right:22px;
    bottom:18px;
    font-size:13px;
    opacity:.7;
    display:flex;
    gap:8px;
    align-items:center;
    z-index:10;
  }
  .dot{
    width:8px;height:8px;border-radius:50%;
    background:#999;
  }
  .dot.on{ background:#22c55e; box-shadow: 0 0 0 6px rgba(34,197,94,.15); }
</style>
</head>

<body>
<div id="hearts" aria-hidden="true"></div>

<div class="paper">
  <h1>××××™ ×¤×™×¦×™×™×ª ×©×œ×™ ğŸ’–</h1>

  <p>
××ª ×‘×ª×§×•×¤×ª ×‘×—×™× ×•×ª<br>
×× ×™ ×‘×ª×§×•×¤×ª ××—×©×‘×•×ª <br>
×©× ×™× ×• ×§×¦×ª ×¢××•×¡×™×<br>
××‘×œ ××—×“ ×‘×©×‘×™×œ ×”×©× ×™ ×¢×“×™×™×Ÿ ×¢×•×©×™×<br>
  </p>

  <p>
××– ×”×™×•× ×”×•× ×™×•× ×”××”×‘×”<br>
×•××™ ×× ×™ ×©××¤×¡×¤×¡ ×”×–×“×× ×•×ª ×œ×”×¨××•×ª ×œ×š ×—×™×‘×”<br>
×× ×™ ×¨×•×¦×” ×©×ª×“×¢×™ ×›××” ×¢×‘×•×¨×™ ××ª ×—×©×•×‘×”<br>
×©×× ×™ ××•×§×™×¨ ×œ×š ×ª×•×“×” ×•×©××ª ×›×œ ×›×š ××”×•×‘×”<br>
  </p>

  <p>
×ª×•×“×” ×¢×œ ××™ ×©××ª, ×ª×•×“×” ×©××ª ××•×”×‘×ª ××•×ª×™<br>
×ª×•×“×” ×©××ª ×¨×•××” ××•×ª×™ ×•×¢×•×©×” ×•××ª××¤×§×ª ×‘×©×‘×™×œ×™<br>
×ª×•×“×” ×¢×œ ×›×œ ×”××××¦×™× ×©×œ×š, ×¢×œ ×”×œ×‘ ×”×¢× ×§ ×©×‘×š<br>
×ª×•×“×” ×©×× ×™ ×™×›×•×œ ×œ×”×™×¤×ª×— ××œ×™×™×š, ×’× ×× ×–×” ×œ××˜ ×œ××˜<br>
×™×© ×‘×š ×”×›×œ ×•×× ×™ ×œ×’××¨×™ ×–×›×™×ª×™<br>
×•×× ×™ ××¦×˜×¢×¨ ×©×œ×¤×¢××™× ×× ×™ ×œ× ××¦×œ×™×— ×œ×¢×‘×™×¨ ××ª ×–×” ××¡×¤×™×§<br>
  </p>

  <p>
×ª×•×“×” ×©××ª ×œ×¦×™×“×™<br>
××ª ××©×“×¨×’×ª ××•×ª×™ ×•×¢×•×–×¨×ª ×œ×”×¤×•×š ××•×ª×™ ×œ×‘×Ÿ ××“× ×™×•×ª×¨ ×©×œ×<br>
×•××™×›×©×”×• ×”×¨×’×¢×™× ×”×§×˜× ×™× ××™×ª×š ×”×›×™ ×××œ××™× ×œ×™ ××ª ×”×œ×‘<br>
  </p>

  <div class="signature">
    ×©×œ×š ×ª××™×“,<br/>
    ×¤×•×¦'×•×§×•×¤×•×¦'×•
  </div>

  <div class="btnRow">
    <a class="btn" href="index.html">×¢×•×“ ×¤×¢× ğŸ˜˜</a>
  </div>
</div>

<div class="musicBadge">
  <span class="dot" id="musicDot"></span>
  <span id="musicText">Music playing âœ¨</span>
</div>

<!-- Same audio file as index.html -->
<audio id="bgm" preload="auto" loop>
  <source src="dandelions.mp3" type="audio/mpeg">
</audio>

<script>
  // -----------------------------
  // RESUME MUSIC from localStorage
  // -----------------------------
  const bgm = document.getElementById('bgm');
  const musicDot = document.getElementById('musicDot');
  const musicText = document.getElementById('musicText');

  window.addEventListener('load', async () => {
    const shouldPlay = localStorage.getItem('valentineMusicPlaying');
    const savedTime = localStorage.getItem('valentineMusicTime');

    if (shouldPlay === 'true') {
      try {
        // Resume from saved position
        if (savedTime) {
          bgm.currentTime = parseFloat(savedTime);
        }
        
        await bgm.play();
        musicDot.classList.add('on');
        musicText.textContent = "Music playing âœ¨";

        // Continue updating position
        setInterval(() => {
          if (!bgm.paused) {
            localStorage.setItem('valentineMusicTime', bgm.currentTime.toString());
          }
        }, 500);

      } catch(e) {
        musicDot.classList.remove('on');
        musicText.textContent = "Music paused";
      }
    } else {
      musicDot.classList.remove('on');
      musicText.textContent = "No music playing";
    }
  });

  // -----------------------------
  // FALLING HEARTS
  // -----------------------------
  const layer = document.getElementById('hearts');
  const hearts = ["ğŸ’—","ğŸ’–","ğŸ’•","ğŸ’","ğŸ’˜","â¤ï¸"];

  function dropHeart(){
    const h = document.createElement('div');
    h.className = 'heart';
    h.textContent = hearts[Math.floor(Math.random()*hearts.length)];

    const size = 14 + Math.random()*26;
    const left = Math.random()*100;
    const dur  = 5 + Math.random()*7;

    h.style.left = left + 'vw';
    h.style.fontSize = size + 'px';
    h.style.animationDuration = dur + 's';

    layer.appendChild(h);
    setTimeout(()=>h.remove(), dur*1000 + 200);
  }

  setInterval(dropHeart, 260);
</script>
</body>
</html>
